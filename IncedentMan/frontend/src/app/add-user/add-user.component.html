<div class="form-container">
    <h2>Add New User</h2>
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="username">Username</label>
        <input 
          type="text" 
          id="username" 
          formControlName="username"
          [class.error]="userForm.get('username')?.invalid && userForm.get('username')?.touched">
        <div *ngIf="userForm.get('username')?.invalid && userForm.get('username')?.touched" class="error-message">
          Username is required
        </div>
      </div>
  
      <div class="form-group">
        <label for="password">Password</label>
        <input 
          type="password" 
          id="password" 
          formControlName="password"
          [class.error]="userForm.get('password')?.invalid && userForm.get('password')?.touched">
        <div *ngIf="userForm.get('password')?.errors" class="error-message">
          <div *ngIf="userForm.get('password')?.hasError('required')">Password is required</div>
          <div *ngIf="userForm.get('password')?.hasError('minlength')">
            Password must be at least 6 characters
          </div>
        </div>
      </div>
  
      <div class="form-group">
        <label for="email">Email</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email"
          [class.error]="userForm.get('email')?.invalid && userForm.get('email')?.touched">
        <div *ngIf="userForm.get('email')?.errors" class="error-message">
          <div *ngIf="userForm.get('email')?.hasError('required')">Email is required</div>
          <div *ngIf="userForm.get('email')?.hasError('email')">Invalid email format</div>
        </div>
      </div>
  
      <div class="form-group">
        <label for="role">Role</label>
        <select 
          id="role" 
          formControlName="role"
          [class.error]="userForm.get('role')?.invalid && userForm.get('role')?.touched">
          <option value="">Select Role</option>
          <option value="admin">Admin</option>
          <option value="user">User</option>
          <option value="technician">Technician</option>
        </select>
        <div *ngIf="userForm.get('role')?.invalid && userForm.get('role')?.touched" class="error-message">
          Role is required
        </div>
      </div>
      <div class="form-group" *ngIf="userForm.get('role')?.value === 'technician'">
        <label>Specializations</label>
        <div class="scrollable-select">
          <select multiple 
                  [(ngModel)]="selectedSpecializations"
                  [ngModelOptions]="{standalone: true}"
                  class="form-control">
            <option *ngFor="let spec of specializations" [value]="spec">
              {{ spec }}
            </option>
          </select>
        </div>
      </div>
  
      <div class="button-group">
        <button type="submit" [disabled]="!userForm.valid" class="btn-primary">Create User</button>
        <button type="button" class="btn-cancel" (click)="router.navigate(['/admin'])">Cancel</button>
      </div>
    </form>
  </div>